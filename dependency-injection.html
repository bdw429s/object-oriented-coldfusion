---
layout: base
title: Dependency Injection
---

<h1>Dependency Injection</h1>

<p>
	In an object oriented application each object you create should have well defined and narrow focused responsibilities. 
	In other words, each of your objects should have just a 
	<a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility</a>. 
	If you have an object that performs calculations, database updates, sends emails, imports data and performs logging, 
	then this is a good candidate for breaking down into separate objects each with more narrow focused responsibilities. 
	However, once you have separated your objects in this way you still need a way of combining them so they can work together.  
</p>

<h2>Car and Engine example</h2>

<p>
	Let's consider a simple example where you are designing an application that represented cars with engines. 
	We may have two objects as follows:
</p>

<p>
	<img alt='Car UML diagram' src='assets/images/A370FFDF4CF181539B6C5E358415E8EA.png'>
</p>

<p>
	The applyPressureToAcceleratorPedal() function takes an amount of pressure argument 
	which causes the speed of the car to change. The getCurrentSpeed() function returns the current speed.
</p>

<p>
	<img alt='SimpleEngine UML diagram' src='assets/images/B528C5AC3B20955A622D16CF65496582.png'>
</p>

<p>
	The setFuelIntake() function opens the fuel valve to accept more or less fuel based on the amount specified. 
	The higher the value, the higher the torque of the engine.
</p>

<p>
	Let's make a first attempt at how our Car might be implemented
</p>


{% highlight cfm %}
<component name="Car" output="false">

    <cfset variables.engine = createObject("component","SimpleEngine").init()>

    <cffunction name="init" output="false">
        <cfreturn this>
    </cffunction>
 
    <cffunction name="applyPressureToAcceleratorPedal" output="false">
        <cfargument name="amount" required="true">
        <cfset variables.engine.setFuelIntake(arguments.amount)>
    </cffunction>

    <cffunction name="getCurrentSpeed" output="false">
        <cfset var torque = variables.engine.getTorque()>
        <cfset var speed = ... calculate speed based on torque ...>
        <cfreturn speed>
    </cffunction>

</cfcomponent>
{% endhighlight %}

